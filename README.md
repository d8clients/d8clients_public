# Сервис для записи клиентов
*В большинстве организаций взаимодействие с клиентами происходит по предварительной записи. В настоящее время для этой цели часто используются телефонные звонки, социальные сети или электронная почта. Цель предлагаемого программного обеспечения - оптимизировать запись клиентов. Используя данный сервис, организаторы и сотрудники смогут получить расписание предстоящих событий в определенный период времени. В это же время клиенты будут иметь возможность записаться на предстоящие события.*

## Содержание
- [Описание доменной области](https://github.com/volotovanastasia/NashaComanda/blob/main/README.md#описание-доменной-области)
- [Use-Cases](https://github.com/volotovanastasia/NashaComanda/blob/main/README.md#use-cases)
- [Описание (не-)функциональных требований](https://github.com/volotovanastasia/NashaComanda/blob/main/README.md#описание-не-функциональных-требований)
- [Компонентная модель](https://github.com/volotovanastasia/NashaComanda/blob/main/README.md#компонентная-модель)
- [Референсные архитектуры](https://github.com/volotovanastasia/NashaComanda/blob/main/README.md#референсные-архитектуры)


## Описание доменной области
> ### Введение
В этом документе описывается исходная информация, которая была собрана о событиях в организациях и о том, как они обрабатываются. Эта информация будет использоваться для руководства при разработке программного обеспечения для автоматизации процесса записи и информирования людей о событиях.
> ### Словарь
**Событие** - встреча или оказание услуги, которые имеют точное, назначенное заранее время начала и время конца; каждое событие имеет своего организатора и ограничение по количеству клиентов, зарегистрированных на данное событие. 

Существует два вида событий:

***Свободное событие*** - событие, количество записанных на него клиентов которого не достигло ограничения на число посещений.

***Занятое событие*** - событие, количество записанных на него клиентов которого достигло ограничения на число посещений.

**Запись - процесс** фиксации данных в системе о том, что клиент посетит определенное событие. 

**Клиент** - пользователь, которому предоставлен доступ к просмотру событий и записи на них.

**Сотрудник** - пользователь, работающий в организации, имеющий право на участие в событии в качестве организатора и имеющий доступ к календарю событий, организатором которых является.

**Администратор** - пользователь, работающий в организации, имеющий право на просмотр, создание и редактирование всех событий организации. 

> ### Общие знания о предметной области

События чаще всего происходят в рабочее время

Запись на события может осуществляться только в рабочее время, в то время, как клиенту может понадобиться запись и в нерабочее время организации.

Желание записаться на события присутствует у клиентов как в рабочее, так и в нерабочее время.

У каждого события есть название, местоположение, действующее лицо и спецификация.
Запись на события занимает много времени у администратора.

Прошедшие события не нужны клиентам, но могут быть интересны администраторам и мастерам.

> ### Роли
**Администратор** - создает и регулирует расписание событий.

**Сотрудник** - просматривает расписание свободных и занятых событий, принадлежащих ему.

**Клиент** - может просмотреть и записаться на свободное событие.

**Потенциальные клиенты-сотрудники** - это самозанятые и индивидуальные предприниматели, которым необходимо автоматизировать процесс работы с клиентами, которые имеют выход в интернет.

## Use-Cases

### Регистрация

***Название:*** Регистрация

***Описание:*** Пользователь создаёт аккаунт в системе.

***Предусловия:*** Система должна быть подключена к сети Интернет. Пользователь открывает страницу регистрации на сайте.

***Результат:*** Пользователь зарегистрирован.

***Триггер:*** -

***Успешный сценарий:***

1. Система выводит форму регистрации.
2. Пользователь вводит почту (она же логин) и нажимает кнопку “подтвердить почту”.
3. Система высылает письмо с подтверждением на почту.
4. Пользователь подтверждает почту.
5. Система получает подтверждение и активирует поля с паролем.
6. Пользователь вводит пароль и повтор пароля.
7. пользователь выбирает свою роль и нажимает “зарегистрироваться”.
8. Система создаёт аккаунт пользователя и даёт разрешение на вход и выводит сообщение об успешной регистрации.

***Альтернативные сценарии:***

(2) Если уже существует аккаунт с такой почтой, то система выводит сообщение об этом.

(6.1) Если пароли не совпадают или не соответствуют требованиям надёжности, то система выводит сообщение об ошибке.

### Вход в систему

***Название:*** Вход в систему

***Описание:*** Пользователь входит в систему.

***Предусловия:*** Система должна быть подключена к сети Интернет. Пользователь открыл страницу аутентификации в системе.

***Результат:*** Пользователь перешел на страницу своего аккаунта.

***Триггер:*** -

***Успешный сценарий:***

1. Пользователь вводит свои данные в поля логин и пароль.
2. Система проверяет данные на существование и корректность.
3. Система открывает страницу аккаунта пользователя.

***Альтернативные сценарии:***

(2.1) Если одно из полей не заполнено, то система выводит сообщение об ошибке в незаполненном поле.

(3.1) Если логин не найден, то система выводит сообщение о некорректности логина и предланает пользователю зарегестрироваться или ввести иные данные.

(3.2) Если пароль не верен, то система выводит сообщение о некооректности пароля.

### Открытие страницы аккаунта сотрудника

***Название:*** Открытие страницы аккаунта сотрудника.

***Описание:*** Пользователь вошел в систему с данными сотрудника.

***Предусловия:*** Система должна быть подключена к сети Интернет.

***Результат:*** Пользователь получил доступ к своему аккаунту.

***Триггер:*** -

***Успешный сценарий:***

1. Система открывает календарь с раписанием сотрудника.
2. Сотрудник может нажимать на событие и узнавать дополниельную информацию о событии.

***Альтернативные сценарии:***

Название: Потеря интернет-соединения

1. Система выводит сообщение об ошибке.
2. Система пробует повторно отправить запрос.
3. При восстановлении интернет-соединения сценарий переходит к п. 1. успешного сценария, иначе выводит сообщение об ошибке.

### Открытие страницы аккаунта клиента

***Название:*** Открытие страницы аккаунта клиента.

***Описание:*** Пользователь вошел в систему с данными клиента.

***Предусловия:*** Система должна быть подключена к сети Интернет. Клиент перешел по ссылке или QR администратора.

***Результат:*** Пользователь получил доступ к своему аккаунту.

***Триггер:*** -

***Успешный сценарий:***

1. Пользователь нажимает на активную ячейку для записи на свободное событие.
2. Данные пользователи появляются в данной ячейке.
3. Пользователь выбирает иное свободное событие, сценарий переходит к пунту 2 успешного сценария.

***Альтернативные сценарии:***
(3.1) Пользователь нажал на кнопку «записаться», данные пользователя сохраняются в приложении и становятся доступными для просмотра администратору и сотруднику.

Название: Потеря интернет-соединения

1. Система выводит сообщение об ошибке.
2. Система пробует повторно отправить запрос.
3. При восстановлении интернет-соединения сценарий переходит к п. 1. успешного сценария, иначе выводит сообщение об ошибке.

### Создание администратором расписания

***Название:*** создание администратором расписания
***Действующие лица:*** администратор компании
***Предусловия:*** администратор должен быть авторизован и иметь стабильное интернет-соединение
***Триггер:*** администратор переходит в меню создания расписания событий
***Результат:*** информация сохранена на сервере и локально на устройстве администратора и сотрудников, участвующих в событии. описанные сотрудники получают уведомления о событии.

***Успешный сценарий:***
1. Администратор в меню выбирает пункт “Создание расписания событий”.
2. Администратор выбирает пункт “Добавление нового события”.
3. Система отображает разделы ввода названия и описания события, а также выбора даты, времени, места и сотрудника, участвующего в событии.
4. Администратор вводит информацию о названии и описании события.
5. Администратор подтверждает корректность введенной информацию.
6. Администратор выбирает дату, время, место проведения события и сотрудника, проводящего событие.
7. Администратор подтверждает корректность выбранной информации.
8. Система отображает созданное событие и полученную информацию о нём.
9. Администратор нажимает на кнопку для сохранения введенной информации.
10. Система сохраняет информацию о названии и описании события, о дате времени, месте его проведения, а также о сотруднике, участвующем в событии, на сервере и локально на устройствах администратора и сотрудника, участвующего в событии.
11. Система уведомляет сотрудника, участвующего в событии, и добавляет событие в его расписание.
12. При необходимости администратор повторяет выполнение пунктов 2-12.

***Альтернативный сценарий:*** 
Название: Потеря интернет-соединения

1. Система выводит сообщение об ошибке.
2. Система пробует повторно отправить запрос.
3. Если интернет-соединение было восстановлено и запрос получилось отправить,
   то сценарий переходит к шагу 3. Иначе сценарий возвращается на шаг 1,
   пока количество попыток отправки 3. запроса не превысит 10.
5. Системе удалось отправить запрос.
6. Система выводит информационное сообщение.
Далее сценарий переходит к п. 1. успешного сценария.

***Исключительный сценарий:***
Название: Потеря интернет-соединения

1. Система выводит сообщение об ошибке.
2. Система пробует повторно отправить запрос.
3. Если интернет-соединение было восстановлено и запрос получилось отправить,
   то сценарий переходит к шагу 3. Иначе сценарий возвращается на шаг 1,
   пока количество попыток отправки 3. запроса не превысит 10.
5. Системе не удалось отправить запрос.
6. Система выводит сообщение об ошибке и прекращает попытки связаться с сервером.
Сценарий завершен.

## Описание (не-)функциональных требований
### Функциональные требования

1. Система должна предоставлять возможность авторизации в программе, проверку корректности введенных данных;
2. Система должна предоставлять возможность регистрации новой учетной записи, проверку неиспользования данной электронной почты на сайте, проверка корректности пароля;
3. В системе должно быть реализовано управление доступом на основе ролей;
4. Система должна предоставлять администратору доступ к просмотру расписания всех сотрудников;
5. Система должна предоставлять администратору возможность получить доступ к редактированию и удалению свободных существующих событий, созданию новых;
6. Система должна предоставлять сотруднику компании доступ к просмотру своего расписания;
7. Система должна информировать сотрудника о создании события, огранизатором которого он является;
8. Система должна информировать сотрудника об изменении статуса события, огранизатором которого он является;
9. Система должна предоставлять возможность просмотра свободных событий клиенту;
10. Система должна предоставлять возможность записи на свободное событие авторизованному клиенту;
11. Система должна уметь генерировать пароль для новой учетной записи по заданному логину и адресу электронной почты;
12. Система должна оповещать клиента о предстоящем событии, которое он занял, за сутки до события;
13. Система должна очищать данные о событиях, срок давности которых превышает три месяца.

### Нефункциональные требования
1. Сервис может быть использован на любом устройстве, имеющем выход в сеть Интернет;
2. Система должна быть адаптирована под разные виды девайсов (телефон, компьютер, планшет);
3. Система должна быть кросс-платформенно совместима;
4. Система должна быть доступна пользователям для использования в любое время;
5. Система должна быть легко масштабируемой;
6. Система должна соответствовать стандартам Web Content Accessibility Guidelines (WCAG);
7. Система должна создавать учетную запись пользователя менее чем за 1 с;
8. Веб-приложение должно корректно отображаться в браузерах Mozilla Firefox, Google Chrome, Яндекс.Браузер, Safari;
9. Время загрузки сайта для работы с сервисом не должно превышать 10 секунд;
10. Система должна обслуживать до 1500 одновременных пользователей;
12. Время восстановления системы после сбоя не должно превышать 1 часа.


## Компонентная модель
![This is an image](https://github.com/volotovanastasia/NashaComanda/blob/main/componentnaya_model.jpg)
### Компоненты:
- Web UI - клиентская часть нашего веб-приложения
- Server
  - Регистрация записи - подсистема, которая отвечает за создание и регистрации новой записи.
  - Система оплаты - подсистема, которая отвечает за оплату услуги клиентом (с помощью стороннего платежного сервиса, например API Fondy), после оплаты информация о записи переходит в подсистему обработка записи.
  - Обработка записи - подсистема, которая обрабатывает и сохраняет запись в базу данных после подтверждения оплаты, отвечает за фиксирование всех действий, производящихся с записью.
  - Отзыв клиента - подсистема, которая позволяет клиенту оставить отзыв о работе сотрудника/компании, если запись была подтверждена, после этого отзыв сохраняется в подсистеме базе данных.
  - Рейтинг сотрудников - подсистема, которая составляет рейтинг сотрудников в соответствии с отзывами клиентов, хранящимися в базе данных.
  - Расписание событий - подсистема, которая может составить из совокупности записей и показать пользователю расписание сотрудника на определенный период. 
  - Рассылка - подсистема, которая напоминает клиентам о приближающемся событии, на которое они записаны (будет реализована с помощью email service provider, например unisender).
- База данных - совокупность данных от пользователей, поддерживаемая в памяти компьютера.


## Референсные архитектуры
### Микросервисная архитектура
Эта архитектура характеризуется такими свойствами, как:
- Высокая доступность и тестируемость;
- Низкая связанность;
- Независимо развертываемые компоненты;

Преимуществами данной архитектуры являются устойчивость к сбоям, независимость моделей данных, упрощение замены сервисов при необходимости.
В этой архитектуре наблюдается слабая зависимость одной подсистемы от другой.

### Database-per-Service архитектура
Этот паттерн отвечает за организацию данных в микросервисной архитектуре. Так как мы используем микросервисы, то database-per-service архитектура вытекает этого.
Каждый микросервис содержит в себе базу данных, к которой обращается только он.
